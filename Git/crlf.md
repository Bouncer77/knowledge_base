19 - End of line (CRLF и LF)

Символ перевода строки (end-of-line, EOL):

1. UNIX: **`LF`** (\\n, Unix-eol-style,  0x0A (10 decimal))

2. Windows: **`CRLF`** (\\r\\n, Windows-eol-style, 0x0D (13 decimal) and 0x0A (10 decimal)

3. MacOS: **`LF`** (старый MacOS (до Mac OS X): **`CR`** (\\r, 0x0D (13 decimal)))

Управляющие символы ASCII

1. **`CR`** - Возврат каретки (англ. carriage return, CR) — управляющий символ ASCII (0x0D, 1310, '\r'), при выводе которого курсор перемещается к левому краю поля.

2. **`LF`** - Подача на строку или Перевод на строку (от англ. line feed, LF — «подача [бумаги] на строку») — управляющий символ ASCII (0x0A, 10 в десятичной системе счисления, '\n'), при выводе которого курсор перемещается на следующую строку. Возвращается ли при этом курсор к левому краю или нет, зависит от реализации.

3. **`CRLF`** - Таким образом, вывод последовательности CR+LF в семантике терминала гарантирует действие «создание новой строки».

Эти названия основаны на командах принтера: перевод строки прокручивает барабан на одну строку, а возврат каретки означает, что каретка печатающего устройства должна вернуться к началу текущей строки.


#### Unicode

По стандарту, любое совместимое с Юникодом приложение должно воспринимать как перевод строки каждый из нижеследующих символов:

+ LF (U+000A): англ. line feed — подача строки <ПС>;
+ CR (U+000D): англ. carriage return — возврат каретки <ВК>;
+ NEL (U+0085): англ. next line — переход на следующую строку;
+ LS (U+2028): англ. line separator — разделитель строк;
+ PS (U+2029): англ. paragraph separator — разделитель абзацев.

Последовательность CR+LF (U+000D U+000A) надлежит воспринимать как один перевод строки, а не два

### Git

Де-факто стандарт для хранения исходных текстов программ в удаленном репозитории гласит об использовании **`LF`** (Unix-eol-style)

```
core.autocrlf=true:      core.autocrlf=input:     core.autocrlf=false:

        repo                     repo                     repo
      ^      V                 ^      V                 ^      V
     /        \               /        \               /        \
crlf->lf    lf->crl      crlf->lf       \             /          \      
   /            \           /            \           /            \
```

### Когда появляется это предупреждение (под Windows)

+ autocrlf= true если в одном из ваших файлов есть lf в стиле Unix (= Редко),
+ autocrlf= input если в одном из ваших файлов есть crlf в стиле crlf (= почти ВСЕГДА),
+ autocrlf= false - НИКОГДА!

### Git переменные

Git config переменные могут храниться на 3 различных уровнях. Каждый уровень переопределяет значения предыдущего уровня.

[Документация](https://git-scm.com/docs/git-config.html)

[Базовая документация на русском](https://git-scm.com/book/ru/v2/%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-Git-%D0%9A%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D1%8F-Git)

Если уровень настроек не указан явно, то подразумевается локальный (`--local`)

1. Cистемный уровень (применяется к каждому пользователю системы и всем их репозиториям) (--system)
	
	1. `git config --system --list` - просмотреть переменные системного уровня

	2. `git config --system color.ui true` - пример установки для параметра `color.ui` значения `true`

	3. `git config --system --edit` - отредактировать файл конфигурации git системного уровня


2. Глобальный уровень (значения, специфичные лично для вас, пользователя) (--global)

	1. `git config --global --list` - просмотреть переменные глобального уровня

	2. `git config --global user.name "Ivan Ivanov"` - пример установки для параметра `user.name` значения `"Ivan Ivanov"`

	3. `git config --global --edit` - отредактировать файл конфигурации git глобального уровня

3. Уровень репозитория (специфичный для этого отдельного репозитория) (--local)

	1. `git config --local --list` - просмотреть переменные уровня репозитория

	2. `git config --local core.ignorecase true` - пример установки для параметра (позволяет считать одинаковыми файлы `Makefile` и `makefile`)

	3. git config --edit --local ( --local необязательно)

4. --file <filename>


### Конфигурация Git

Уровень настроек| Расположение | Описание
----------------|--------------|------------------------------
--system        | `/etc/gitconfig`                            | содержит настройки для всех пользователей в системе и всех репозиториев
--global        | `~/.gitconfig` (или `~/.config/git/config`) | настройки конкретного пользователя
--local         | $GIT_DIR/.git/config                        | настройки текущего репозитория 

чтобы установить, git config --local core.ignorecase true ( --local опционально)
чтобы отредактировать конфигурационный файл репозитория, git config --edit --local ( --local необязательно)
Как просмотреть все настройки?
Запустите git config --list , показывая системные , глобальные и (если они находятся внутри репозитория) локальные конфигурации
Run git config --list --show-origin , также показывает исходный файл каждого элемента конфигурации
Как читать один конкретный конфиг?
Например, запустите git config user.name , чтобы получить user.name.
Вы также можете указать параметры --system , --global , --local для чтения этого значения на определенном уровне.

https://coderoad.ru/46941346/%D0%9A%D0%B0%D0%BA-%D1%83%D0%B7%D0%BD%D0%B0%D1%82%D1%8C-%D0%B8%D0%BC%D1%8F-%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F-git-%D0%B8-email-%D1%81%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5-%D0%B2%D0%BE-%D0%B2%D1%80%D0%B5%D0%BC%D1%8F-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8

### Как исправить

Конфиг файл | Описание                                                      | Расположение в Windows                 | Расположение в Linux
------------|---------------------------------------------------------------|----------------------------------------|---------------------
.gitconfig  | Глобальный конфигурационный файл                              | `C:\Users\ikosenkov\.config`           | ``
.git        | Cпециальный каталог в любом git repo                          | `<git_repository>\.git\config`

repo/.git/config-настройки, специфичные для репозитория

~/. gitconfig – пользовательские настройки

Здесь хранятся параметры, заданные с помощью флага --global.

git config --глобальный user.name "Love"

git config --глобальный user.email love@example.com

$(prefix)/etc/gitconfig-общесистемные настройки.


Команда 					| Значение  								  | Конфиг файл
----------------------------|---------------------------------------------|------------------------------------------------
git config core.autocrlf    | Проверить текущее значение (true или false) | 


Значение по умолчанию для core.autocrlf выбирается во время установки git и сохраняется в общесистемном gitconfig (). Также есть (каскадирование в следующем порядке):

- "глобальный" (для пользователя) gitconfig, расположенный в ~/.gitconfig, еще один
- "глобальный" (для пользователя) gitconfig в $XDG_CONFIG_HOME/git/config или $HOME/.config/git/config и
- "local" (per-repo) gitconfig в .git/config в рабочем каталоге.

Итак, напишите git config core.autocrlf в рабочем git config core.autocrlf чтобы проверить текущее используемое значение и

- добавить autocrlf=false в общесистемное решение gitconfig # для системы
- git config --global core.autocrlf false # решение для каждого пользователя
- git config --local core.autocrlf false # решение для каждого проекта

Предупреждения
- настройки git config могут быть переопределены настройками gitattributes.
- crlf → lf преобразование происходит только при добавлении новых файлов, на файлы crlf уже существующие в репо, это не влияет.

Мораль (для Windows):
- используйте core.autocrlf= true если вы планируете использовать этот проект также и под Unix (и не хотите настраивать ваш редактор /IDE для использования концов строк Unix),
- используйте core.autocrlf= false если вы планируете использовать этот проект только под Windows (или вы настроили свой редактор /IDE для использования концов строк Windows),
- никогда не используйте core.autocrlf= input если у вас нет веских причин (например, если вы используете утилиты unix под windows или если у вас возникают проблемы с makefiles),

PS Что выбрать при установке git для Windows?
Если вы не собираетесь использовать какой-либо из ваших проектов под Unix, не соглашайтесь с первым вариантом по умолчанию. Выберите третий (Оформить заказ как есть, зафиксировать как есть). Вы не увидите это сообщение. Когда-либо.

PPS Мое личное предпочтение - настроить редактор/IDE для использования окончаний в стиле Unix и установить для core.autocrlf значение false.

ikosenkov@ikosenkov MINGW64 /c/sh/vtb-gsrri-project/MVP/Core (development)
$ git config core.autocrlf
false

ikosenkov@ikosenkov MINGW64 /c/sh/vtb-gsrri-project/MVP/Core (development)
$ git config --global core.autocrlf
false

ikosenkov@ikosenkov MINGW64 /c/sh/vtb-gsrri-project/MVP/Core (development)
$ git config --local core.autocrlf
false
