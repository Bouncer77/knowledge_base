# Строка приглашения

## Строка приглашения

[PR1](https://meliorem.ru/tools/linux/kak-izmenit-format-stroki-priglasheniya-v-terminale-linux/)

```bash
#Вывести формат строки приглашения
echo $PS1

#bash-4.2$ echo $PS1
#\s-\v\$


#[oleg@meliorem ~]# echo $PS1
#[\u@\h \W]\$

# PS1="\e[1;38;5;48m\u@\h\e[m:\e[1;38;5;45m\w\e[m\n\\$ "
```

# Изменить оболочку

`chsh -l`  - вывести список оболочек

```
postgres@nt-pgsql:~$ chsh -l
/bin/sh
/bin/bash
/usr/bin/sh
/usr/bin/bash
```

# Сохранение формата строки приглашения на постоянной основе

1. `/etc/bashrc` или `/etc/profile.d/<название>.sh` - для всех пользователей. Перезапуск оболочки bash - `exec bash`
2. `~/.bashrc` - для пользователя. Перезапуск - `source ~/.bashrc`

Спецсимволы:

+ \u - (user) имя текущего пользователя.
+ \h - (host) имя текущего хоста.
+ \W - (working directory) путь к рабочему каталогу (каталог, где сейчас находится пользователь).
+ \\$ - тип пользователя (# - для root, $ - для обычных пользователей).

Простые экранируемые символы:

+ \a - звуковой сигнал (ASCII: 07)
+ \e - символ escape-последовательности
+ \" - двойные кавычки
+ \\ - обратный слэш
+ \n - новая строка
+ \r - возврат каретки (курсора) на начало строки
+ \[- начало последовательности непечатных символов
+ \] - конец последовательности непечатных символов
+ \nnn - восьмеричный код символа (\113 -> K)

Вывод даты и времени

+ \d - дата в формате "день недели месяц число"
+ \D{формат даты} - дата в указанном формате, например \D{%d.%m.%Y}
+ \@ - время в 12 часовом  формате "часы:минуты AM\PM"
+ \A - время в 24 часовом  формате "часы:минуты"
+ \t - время в 24 часовом  формате "часы:минуты:секунды"
+ \T - время в 12 часовом  формате "часы:минуты:секунды

Вывод системной информации

+ \h - имя хоста до первой точки
+ \H - полное имя хоста
+ \j - количество работ (jobs), выполняемых в терминале (скрытых после нажатия Ctrl+Z)
+ \s - имя текущей оболочки (вывод значения переменной - $0)
+ \u - имя текущего пользователя
+ \v - версия оболочки BASH
+ \V - более детальная версия оболочки BASH
+ \w - полный путь к текущей директории
+ \W - имя текущей директории
+ \! - номер текущей команды в истории команд
+ \# - номер текущей команды за период сессии
+ \\$ - тип пользователя (# - для root, $ - для всех остальных)

### Раскрасить строку приглашения

[Статья](https://meliorem.ru/tools/linux/kak-izmenit-cvet-teksta-stroki-priglasheniya-v-terminale-linux/)

	Иногда использование непечатных символов таких как \e может привести к некорректному поведению строки приглашения, особенно при пролистывании истории команд кнопкой вверх. В связи с этим крайне рекомендуется экранированить все непечатные символы с помощью - \[  \].

`PS1="\[\e[1;92m\]\u@\h\[\e[m\]:\[\e[1;96m\]\w\[\e[m\]\\$ "`

Существуют терминалы, которые поддерживают следующее количество цветов:

+ 8 цветов - для 3 битной версии управляющих символов ANSI, поддерживается почти всеми терминалами.
+ 16 цветов - для 4 битной версии управляющих символов ANSI, поддерживается почти всеми терминалами.
+ 88 цветов -  для 7 битной версии управляющих символов ANSI, поддерживается многими современными терминалами.
+ 256 цветов - для 8 битной версии управляющих символов ANSI, поддерживается многими современными терминалами.
+ 16777216 цветов - для 24 битной версии управляющих символов ANSI, поддерживается только терминалами в современных графических оболочках.

`tput colors` - Узнать сколько цветов поддерживает терминал

PS1="\e[1;38;5;48m\u@\h\e[m:\e[1;38;5;45m\w\e[m\n\\$ "

Непечатных символы:

+ \e[ - начало форматирования текста.
+ x;y;zm - код цвета (x = код форматирования, y = код цвета текста, z = код цвета фона). Порядок следования x,y и z не имеет значения, т.к. код определяется по числовому значению, а не по его положению.
+ \e[m - конец форматирования текста (необязателен, нужен для сброса форматирования).

> Непечатные символы надо экранировать `\[  \]`

```bash
PS1="\[\e[1;96m\]\u@\[\e[1;91m\]\h\[\e[m\]:\[\e[1;92m\]\w\[\e[1;97m\]\\$[\e[m\]"
PS1="\[\e[1;91m\]\u\[\e[1;38;5;215m\]@\[\e[1;92m\]\h\[\e[m\]:\[\e[1;94m\]\w\[\e[1;38;5;215m\]\\$\[\e[m\] "
```