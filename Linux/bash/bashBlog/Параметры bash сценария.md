# Параметры bash сценария

[Ух какая статейка - всм статейкам статейка](https://overcoder.net/q/6045/%D0%BA%D0%B0%D0%BA-%D0%BC%D0%BD%D0%B5-%D1%80%D0%B0%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D1%82%D1%8C-%D0%B0%D1%80%D0%B3%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%BD%D0%BE%D0%B9-%D1%81%D1%82%D1%80%D0%BE%D0%BA%D0%B8-%D0%B2-bash)

### basename

Команда `basename` возвращает только название скрипта без абсолютного или относительного пути к нему:

```bash
#!/bin/bash
name=$(basename $0)
echo "Имя запущенной программы: $name"
```
### shift

Bash — команду shift. Её прямое назначение заключается в сдвиге параметров на одну позицию влево. Таким образом, значение из переменной $3 переместится в $2, а из $2 — в $1. Но из $1 значение просто отбросится и не сместится в $0, так как там неизменно хранится название запущенной программы.

```bash
#!/bin/bash
count=1
while [ -n "$1" ]; do
	echo "Параметр №$count = $1"
	count=$[ $count + 1 ]
	shift
done
```

Сдвиг влево на несколько позиций 

```bash
#!/bin/bash
echo "Первый параметр из переданных: $1"
shift 2
echo "Теперь первый параметр: $1"
```

На заметку: при использовании shift нужно быть осторожным, ведь сдвинутые за пределы $1 параметры не восстанавливаются в период работы программы

Работа с опциями

```bash
#!/bin/bash
while [ -n "$1" ]; do
	case "$1" in
		-a | -b | -c) echo "Найдена опция $1" ;;
		*) echo "$1 не опция" ;;
	esac
	shift
done
````

### getopts 

> Обратите внимание, что getopts не может анализировать длинные параметры в стиле GNU (--myoption) или длинные параметры в стиле XF86 (-myoption)

Таким образом, вы не можете использовать длинные строки как --port или --ip непосредственно с getopts. 
[Однако дополнительные обходные пути доступны](https://www.bahmanm.com/2015/01/command-line-options-parse-with-getopt.html)

> Этот простой скрипт принимает номер порта с параметром p и ip-адрес с параметром i .

Вызов:

```bash
./myscript -p 1985 -i 192.168.1.1
# или
./myscript -i 192.168.1.1 -p 1985
```

Сценарий:

```bash
while getopts "i:p:" option; do
  case $option in
    i ) ip_address=$OPTARG
    echo "ip address: $ip_address"
    ;;
    p ) port_number=$OPTARG
    echo "port number: $port_number"
    ;;
  esac
done
```
Вывод:

```
ip address: 192.168.1.1
port number: 1985
```